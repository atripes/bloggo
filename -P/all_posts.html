<!DOCTYPE html>
<html>

<head>
	<title>devblog</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
	<link rel="stylesheet" href="/assets/css/main.css" />
	<!--[if lte IE 9]><link rel="stylesheet" href="/assets/css/ie9.css" /><![endif]-->
	<!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
</head>


<body>

    <!-- Wrapper -->
<div id="wrapper">

<!-- Header -->
<header id="header">
	<a href="http://localhost:4000/" class="logo"><strong>devblog</strong> <span>by atripes</span></a>
	<nav>
		<a href="#menu">Menu</a>
	</nav>
</header>

<!-- Menu -->
<nav id="menu">
	<ul class="links">
        
		    
		        <li><a href="http://localhost:4000//"></a></li>
	    	
		
		    
		
		    
		
		    
		
		    
		        <li><a href="http://localhost:4000//">Home</a></li>
	    	
		
		    
		
		    
		
		
		    
		
		    
		        <li><a href="http://localhost:4000/about">About</a></li>
		    
		
		    
		
		    
		
		    
		
		    
		
		    
		
	</ul>
	<!--ul class="actions vertical">
		<li><a href="#" class="button special fit">Get Started</a></li>
		<li><a href="#" class="button fit">Log In</a></li>
	</ul-->
</nav>
 
    
    
<!-- Main -->
<div id="main" class="alt">

<!-- One -->
<section id="one">
	<div class="inner">
                
		<header class="major">
			<h1>Media Recommendations</h1>
		</header>
		
		<p>2018-06-07 00:00:00 +0200</p>
		<p><h2 id="lectures">Lectures</h2>
<ul>
  <li>Leonard Bernsteins unanswered question from 1973 about the science of music and harmonics. This is no doubt something every human has to know. <a href="https://www.youtube.com/watch?v=8fHi36dvTdE">Found here (sadly youtube)</a>.</li>
</ul>

<p>This will be constantly updated.</p>

<p>Keep on rocking in the free world, and doo doo deloo doo …</p>

<p>Don’t forget about archive.org if the links are broken.</p>
</p>
                
		<header class="major">
			<h1>Tips and Trips</h1>
		</header>
		
		<p>2018-04-25 00:00:00 +0200</p>
		<p><h2 id="serve-a-file-in-a-network">Serve a file in a network</h2>
<p>You can use socket on pure Linux machines:
<code class="highlighter-rouge">tar -cvz .folder-to-serve | socket -sqw &lt;port&gt;</code> on the server and
<code class="highlighter-rouge">socket -q &lt;server-ip&gt;:&lt;port&gt; | tar -xvz</code> on the client and voila enjoy your file.</p>

<p>You have to use other measures when OSX is in play, because Apple. Use npms <code class="highlighter-rouge">http-server</code>!
<code class="highlighter-rouge">npm install -g http-server</code> and then 
<code class="highlighter-rouge">cd &lt;DIR TO SERVE&gt; &amp;&amp; http-server</code> That’s it. now you can <code class="highlighter-rouge">wget &lt;server-ip&gt;/file</code> and feel like a free man.</p>

<h2 id="use-pipenv-instead-of-pip">Use pipenv instead of pip</h2>
<p>(https://docs.pipenv.org/)</p>

<h2 id="unattended-linux-install-using-preseed-file">Unattended linux install using preseed file</h2>
<p>Fuck, this will be a standalone post at some point. Nah, wait, it’s so easy:
<code class="highlighter-rouge">git clone https://github.com/core-process/linux-unattended-installation.git</code> and then follow the readme. Only works on Linux hosts.</p>

<h2 id="compress-mp4-via-ffmpeg">Compress mp4 via ffmpeg</h2>
<p>This compresses the input by a factor of ~12:
<code class="highlighter-rouge">ffmpeg -i ds_orig.mp4 -c:v libx264 -c:a copy -crf 28 -preset veryfast x264_crf28.mp4</code></p>

<h2 id="disable-mouse-acceleration-in-osx-high-sierra">Disable mouse acceleration in OSX (High Sierra)</h2>
<p><code class="highlighter-rouge">defaults read .GlobalPreferences com.apple.mouse.scaling</code> to read the value.
<code class="highlighter-rouge">defaults write .GlobalPreferences com.apple.mouse.scaling -1</code> to disable it. Login again for changes being applied.
Create a task with Automator (shellscript) and paste the write portion to it. Add it as a login item in <code class="highlighter-rouge">system-preferences -&gt; user and groups</code></p>

<h2 id="certbot-letsencrypt-for-multiple-domains">Certbot (letsencrypt) for multiple domains</h2>
<p><code class="highlighter-rouge">certbot --nginx -d domain1 -d domain2 -d domain3</code>.</p>

<p>Don’t forget about archive.org if the links are broken.</p>
</p>
                
		<header class="major">
			<h1>Ansible in a virtualenv</h1>
		</header>
		
		<p>2018-04-25 00:00:00 +0200</p>
		<p><h2 id="the-problem">The problem</h2>
<p>Ansible installed via standard OS package manager uses standard OS python. Yes, in practice this is exactly as horrible as you might imagine. I learned that the OS python is something you never want to touch, change, symlink, update, or do anything else with it beside acting as if it wasn’t there.</p>

<p>Example: We use ansible to provision digital ocean machines with the official DO ansible module. It requires the pip package <code class="highlighter-rouge">dopy</code>. This is one of many custom dependencies your project might have and if you use system installed ansible then you have to install dopy system wide. That is, if ansible is configured to use the right python binary. That works, if you have the $PYTHONPATH set to something this binary understands, and finds dopy in it.</p>

<p>Suddenly vim starts acting up. Some of the plugins also use python and cannot cope well with the newly set PYTHONPATH needed for ansible. You see, <a href="https://xkcd.com/1987/">python versioning is hell</a>. Python is powerful and everyone wants to use it. In its own version, depending on version 2.7, 3.5, you name it. So: everyone gets their own python (that must sound so weird to the <em>elderly</em>!)</p>

<h2 id="the-solution">The solution</h2>
<p><code class="highlighter-rouge">virtualenv</code> to the rescue. It’s like a small python sandbox where all dependecies for the current environment are stored. Thank god ansible is also a pip package, that makes things even easier. Since virtualenv has been around for a bit (~2007) and is a bit clunky to use you can use <a href="https://virtualenv.pypa.io/en/stable/">virtualenvwrapper</a> and you’re good.
Follow the installation procedure for your OS.</p>

<p>So now, if you have a project that needs ansible go inside that projects folder and install ansible inside virtualenv:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkvirtualenv &lt;projectname&gt;
workon &lt;projectname&gt;
pip install ansible
pip install &lt;random ansible dependency&gt;
</code></pre></div></div>
<p>And boom. Try <code class="highlighter-rouge">ansible --version</code> and muse at the fact that your python binary now comes from within your virtual sandbox. So cosy!</p>

<p>If you, like me, find it a tad tedious to create the sandbox for every project - not all projects have custom deps - then make a folder <code class="highlighter-rouge">ansible</code> in your <code class="highlighter-rouge">~/bin/</code> folder and just do</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkvirtualenv --system-site-packages ansible
workon ansible
pip install ansible
</code></pre></div></div>
<p>You can now whenever you need ansible somewhere type <code class="highlighter-rouge">workon ansible</code> and you have your system wide version ready. I even deinstalled my OS package manager version (brew in my case).</p>

<p>Keep on rocking in the free world, and doo doo deloo doo …</p>

<p>Don’t forget about archive.org if the links are broken.</p>
</p>
                
		<header class="major">
			<h1>The Tao of programming</h1>
		</header>
		
		<p>2018-04-18 00:00:00 +0200</p>
		<p><ul>
  <li><a href="https://sanctum.geek.nz/arabesque/vim-koans/">vim-koans</a></li>
  <li><a href="https://blog.samwhited.com/2015/04/the-dharma-of-vi/">The Darma of Vi</a></li>
  <li><a href="http://www.catb.org/esr/writings/unix-koans/introduction.html">unix-koans</a></li>
  <li><a href="http://canonical.org/~kragen/tao-of-programming.html">The Tao of programming</a></li>
</ul>

<p>Don’t forget about archive.org if the links are broken.</p>
</p>
                
		<header class="major">
			<h1>Developing on Ethereum</h1>
		</header>
		
		<p>2018-04-18 00:00:00 +0200</p>
		<p><ul>
  <li><a href="https://blockgeeks.com/guides/ethereum-developer/">blockgeeks guide</a></li>
  <li><a href="https://keepingstock.net/explaining-blockchain-how-proof-of-work-enables-trustless-consensus-2abed27f0845">PoW info</a></li>
  <li><a href="https://www.coinpursuit.com/pages/proof-of-work-proof-of-stake-bitcoin-mining/">PoW vs PoS</a></li>
  <li><a href="https://blockgeeks.com/guides/proof-of-work-vs-proof-of-stake/">PoW vs PoS #2</a></li>
  <li><a href="https://onedrive.live.com/view.aspx?ref=button&amp;Bsrc=SMIT&amp;resid=EC979A0BFE845FB5!579&amp;cid=ec979a0bfe845fb5&amp;app=OneNote&amp;authkey=!AozUkp6P5DW7Oos">MoveCoin</a></li>
</ul>
</p>
                
		<header class="major">
			<h1>Lineage to Moto G5</h1>
		</header>
		
		<p>2018-03-08 00:00:00 +0100</p>
		<p><p>I hate bloatware. All stock vendor software is spying bloatware that only exists for the benefit of the company selling the device. This is the description of countermeasure.</p>

<h2 id="unlock-bootloader--install-team-win-recovery-project">Unlock Bootloader / Install Team Win Recovery Project</h2>

<p>Requirements:</p>
<ul>
  <li><a href="https://developer.android.com/studio/releases/platform-tools">adb and fastboot</a></li>
  <li><a href="https://twrp.me/Devices/">TWRP</a></li>
</ul>

<p>Connect your device and activate USB Debugging (in Developer Mode).
I had to find a specific unlock key to provide to Lenovo in order to unlock my boot loader. If someone could tell me why the hell Lenovo is interested in shit that only concerns me and my own property, please indulge me.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@machine:~$ ./adb devices
user@machine:~$ ./adb reboot bootloader
user@machine:~$ ./fastboot oem get_unlock_data
user@machine:~$ ./fastboot oem unlock MY_OWN_PRIVATE_CODE
</code></pre></div></div>
<p>The commands above is how you get the code needed for the <a href="https://motorola-global-portal.custhelp.com/app/standalone/bootloader/unlock-your-device-b/session/L3RpbWUvMTUyMTAyMTY4MC9zaWQvZlVSckg1SXJna1dyUlI5dE1CTTBmVmM4Z1NLckJwdTN3UnJMRlJ0R0F0Y29oakFSUEtoeEtxUEJrQ2g1b1VBOEFWalk4V2l0SV9FODVlNWhMV2NXeGIlN0VxWV9iMVVoMFpzS01CS1F5M3hpOUE0QmJGNms0XyU3RWlRZyUyMSUyMS9wdGEvMQ==">official page</a> for unlocking the bootloader of your Moto.</p>

<p>From here on it’s getting the twrp recovery image flashed onto the device:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user@machine:~$ cp ~/Downloads/twrp-3.2.1-0-cedric.img ./recovery.img
user@machine:~$ ./fastboot flash recovery recovery.img
</code></pre></div></div>

<p>That’s it, now you can boot into TWRP.</p>

<h2 id="install-lineage-and-gapps">Install LineAge and GApps</h2>
<p>Requirements:</p>
<ul>
  <li><a href="https://download.lineageos.org/">Lineage</a></li>
  <li><a href="http://opengapps.org/">GApps</a></li>
</ul>

<p>I used <a href="https://www.android.com/filetransfer/">Android File Transfer</a> to move the zip files onto my sdcard (moto g5 hdd). Once on the device you can Install them using the TWRP GUI.
You can also use (and this is more resilient) adb for this: <code class="highlighter-rouge">./adb push &lt;filename&gt; /sdcard/</code></p>

<h2 id="titanium-backup-with-synology-dsm">Titanium Backup with Synology DSM</h2>

<p>Root your device. For Lineage 14.1 this is easiest done via the official <a href="https://download.lineageos.org/extras">su addon</a>. Install via TWRP and tick <code class="highlighter-rouge">enable root access</code> in the Developer Options of your OS.
Get and pay for Titanium Backup. Setup a Synology DiskStation in your home and install CloudStation on your mobile device. Once you have that you can Backup all user settings and all applications to that CloudStation and have it synced with your home NAS. Which again can be (or should be) backed up to an encrypted offsite backup location. gl &amp; hf.</p>
</p>
                
		<header class="major">
			<h1>Deploying via post-receive hook</h1>
		</header>
		
		<p>2018-03-06 00:00:00 +0100</p>
		<p><p>It’s amlost as flexible and verbose as gitlabs CI feature. But without all the overhead.
For me, the key was setting up the bare git repo on the production server:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~/project_name
git init --bare
</code></pre></div></div>
<p>To this repo we will push later on. This repo also needs the post-receive hook:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>touch ./hooks/post-receive
chmod a+x ./hooks/post-receive
</code></pre></div></div>
<p>It needs to be executable. Put this code into the hook file:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nb">cd</span> /var/www/project_name

<span class="k">while </span><span class="nb">read </span>oldrev newrev ref
<span class="k">do
	</span><span class="nb">echo</span> <span class="s2">"Ref </span><span class="nv">$ref</span><span class="s2"> successfully received. Deploying the server..."</span>
	git <span class="nt">--work-tree</span><span class="o">=</span>/var/www/project_name <span class="nt">--git-dir</span><span class="o">=</span>/home/user/project_name checkout develop <span class="nt">-f</span>
<span class="k">done</span>
</code></pre></div></div>
<p>Since this script gets its params from stdin instead of cli parameters you need to fetch them with <code class="highlighter-rouge">read</code>. because there could be more than one branch pushed, you need to do this for each one seperate, hence the <code class="highlighter-rouge">while</code> loop. in fact, this never comes into play at my deployments, because when i push to production, i always ever push master.</p>

<p>What this does is, it checks out the project into <code class="highlighter-rouge">/var/www/project_name</code> which in this case is the location that I serve my site from. In the case of my jekyll application there are still things to do for it to run (protip at the bottom of this doc how to solve it).</p>

<p>Ah, btw. How to push.
You are on your dev machine, working on the project, pushing happily into whatever repository holds your code. For this deployment routine to work you need to add an additional remote:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git remote add production ssh://user@prodserver.com:~/project_name
</code></pre></div></div>
<p>And you push your current master with:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push production master
</code></pre></div></div>
<p>The push will return whatever stdout it received, so you will know wether it worked or not.
Thanks to <code class="highlighter-rouge">http://www.janosgyerik.com/deploying-new-releases-using-git-and-the-post-receive-hook/</code> to get me started on this topic.</p>

<p>Protip:
You can add whatever deployment routine you want after that checkout. In my case I am building and restarting a jekyll app, and the command looks like this:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git --work-tree=/var/www/project_name --git-dir=/home/user/project_name checkout master -f &amp;&amp; jekyll build &amp;&amp; jekyll serve --detach
</code></pre></div></div>
</p>
                
		<header class="major">
			<h1>A truly good mouse.</h1>
		</header>
		
		<p>2018-02-06 20:29:21 +0100</p>
		<p><p>Straight forward, the best piece of hardware I laid my hands on in the past decade was this lovely piece:</p>

<p style="text-align:center"><img src="/assets/images/bmouse.png" alt="Sensei" width="200px" /></p>

<p>It’s the SteelSeries Sensei. No I don’t get money from them for saying this. I wish I would, nothing wrong with that, if what I say is really how I feel. The mouse is enough though. Enough <em>payment</em> to praise it. Let’s talk about why:</p>

<h2 id="palm-held">Palm held</h2>
<p>I hold my mouse in an oblique arch of pinky and thumb. Kind of a clench of the thumbs and pinkies MCP (metacarpo phalangeal joint). Okay okay, I had to google it:</p>

<p style="text-align:center"><img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Metacarpal_bones_%28left_hand%29_-_animation01.gif" alt="Metacarpals" height="120px" /></p>

<p>The Sensei is really well designed to do exactly that. For comparison, try to hold Apples mighty mouse the same way and you end up with cramps and sore skin from the sharp plastic edges.</p>

<h2 id="smooth-glossy-surface">Smooth, glossy surface</h2>
<p>Kind of subjective, but I really like glossy materials on mouses. Yes you have to clean it more often, but hey… It is then cleaned more often.</p>

<h2 id="midmid-sensor-position">Mid/Mid sensor position</h2>
<p>Repositioning of the mouse is constantly required, the larger the screen the more repositioning necessary. I don’t know about you, but for me there is a certain movement, a lift of the palm, perfectly integrated into all mouse movements. Its angle, height and duration often similar, the movement developed over years of mouse usage. I had all kinds of sensor positions on my devices, and everything that wasn’t perfectly centered below my palm drove me mad in very little time. You don’t want that cursor to move if you’re doing a repositioning move. It’s also super annoying, if the sensor starts picking up movement a moment to soon and the downward motion while setting the mouse back down creates cursor movement. First time I saw this, but the Sensei allows you to adjust lift-height and the sensor won’t pick up anything before the defined height is reached. So convenient!</p>

<h2 id="4-shoulderside-buttons">4 shoulder/side buttons</h2>
<p>Almost too many, but only almost. Purists would go for a shoulder-button-less mouse and I am tempted for that as well, but keep using the sparsly distributed shoulder buttons too much as to argue I wish they weren’t there.</p>
</p>
                
	</div>
</section>

</div>

    <!-- Footer -->
	<footer id="footer">
		<div class="inner">
			<ul class="icons">
				
				
				
				
				
				
				
				
				
				
			</ul>
			<ul class="copyright">
				<li>&copy; devblog by atripes</li>
				<li>Design: <a href="https://html5up.net" target="_blank">HTML5 UP</a></li>
				<li>Jekyll integration: <a href="http://andrewbanchi.ch" target="_blank">Andrew Banchich</a></li>

			</ul>
		</div>
	</footer>

</div>

<!-- Scripts -->
	<script src="http://localhost:4000/assets/js/jquery.min.js"></script>
	<script src="http://localhost:4000/assets/js/jquery.scrolly.min.js"></script>
	<script src="http://localhost:4000/assets/js/jquery.scrollex.min.js"></script>
	<script src="http://localhost:4000/assets/js/skel.min.js"></script>
	<script src="http://localhost:4000/assets/js/util.js"></script>
	<!--[if lte IE 8]><script src="http://localhost:4000/assets/js/ie/respond.min.js"></script><![endif]-->
	<script src="http://localhost:4000/assets/js/main.js"></script>


</body>

</html>
